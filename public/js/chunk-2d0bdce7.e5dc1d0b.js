(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bdce7"],{"2e20":function(t,o,e){"use strict";e.r(o);var r=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("v-row",[e("v-col",[e("p",[t._v("Показывать непустые столбцы")]),e("div",[e("v-switch",{model:{value:t.shortListHeaders,callback:function(o){t.shortListHeaders=o},expression:"shortListHeaders"}})],1)]),e("v-col",[e("p",[t._v("Отображать товары не основного ассортимента для сопоставления")]),e("v-radio-group",{model:{value:t.showNotLinkedProduct,callback:function(o){t.showNotLinkedProduct=o},expression:"showNotLinkedProduct"}},[e("v-radio",{attrs:{value:null,label:"не показывать"}}),t._l(t.providers,(function(t){return e("v-radio",{key:t.id,attrs:{value:t.id,label:t.nameProvider+" #"+t.id}})}))],2)],1)],1),t.tableInfo&&t.tableInfo.rows?e("v-data-table",{attrs:{headers:t.headers,items:t.tableInfo.rows.concat(t.tableInfo.notLinkedRows)},scopedSlots:t._u([{key:"item.id",fn:function(o){var r=o.item;return[r.id?e("div",[t._v(" "+t._s(r.id)+" ")]):e("div",[e("v-select",{attrs:{items:t.itemsForSelect,label:"Связать","item-text":"text","item-value":"id"},on:{change:function(o){t.select(o,r)}}})],1)]}}],null,!1,2887582352)}):t._e(),null!==t.error?e("div",[t._v("Error - "+t._s(t.error))]):t._e()],1)},i=[],n=e("5530"),a=e("2909"),c=(e("99af"),e("d81d"),e("159b"),e("caad"),e("b0c0"),e("b64b"),e("4de4"),e("bc3a")),d=e.n(c),s={name:"Sources",components:{},data:function(){return{providerProducts:null,mainProducts:null,providers:null,error:null,shortListHeaders:!0,showNotLinkedProduct:null,mainAssort:null}},computed:{itemsForSelect:function(){return this.mainAssort?[{text:"New",id:"New"}].concat(Object(a["a"])(this.mainAssort.map((function(t){var o=t.YMName?"".concat(t.YMName,"(").concat(t.YMId,")"):t.OzonName?"".concat(t.OzonName,"(").concat(t.OzonId,")"):"";return{id:t.id,text:"".concat(t.id,": ").concat(o)}})))):[]},tableInfo:function(){var t=this;if(!this.mainProducts||!this.providerProducts||!this.providers)return null;var o=this.mainProducts.map((function(t){return t.id})),e={};o.forEach((function(t){e[t]={}}));var r=[];this.providerProducts.forEach((function(t){if(t.idMainProduct){var o=t.idMainProduct;if(e[o]||(e[o]={}),t.idProductProvider){var i="id #".concat(t.idProvider);r.includes(i)||r.push("id #".concat(t.idProvider)),e[o]["id #".concat(t.idProvider)]=t.idProductProvider}if(t.name){var n="name #".concat(t.idProvider);r.includes(n)||r.push("name #".concat(t.idProvider)),e[o]["name #".concat(t.idProvider)]=t.name}if(t.price){var a="price #".concat(t.idProvider);r.includes(a)||r.push("price #".concat(t.idProvider)),e[o]["price #".concat(t.idProvider)]=t.price}if(t.count){var c="count #".concat(t.idProvider);r.includes(c)||r.push("count #".concat(t.idProvider)),e[o]["count #".concat(t.idProvider)]=t.count}}}));var i=Object.keys(e).map((function(t){return Object(n["a"])({id:t},e[t])})),a=[];this.showNotLinkedProduct&&(a=this.providerProducts.filter((function(o){return o.idProvider===t.showNotLinkedProduct})).map((function(t){var o={};if(t.idProductProvider){var e="id #".concat(t.idProvider);r.includes(e)||r.push("id #".concat(t.idProvider)),o["id #".concat(t.idProvider)]=t.idProductProvider}if(t.name){var i="name #".concat(t.idProvider);r.includes(i)||r.push("name #".concat(t.idProvider)),o["name #".concat(t.idProvider)]=t.name}if(t.price){var n="price #".concat(t.idProvider);r.includes(n)||r.push("price #".concat(t.idProvider)),o["price #".concat(t.idProvider)]=t.price}if(t.count){var a="count #".concat(t.idProvider);r.includes(a)||r.push("count #".concat(t.idProvider)),o["count #".concat(t.idProvider)]=t.count}return o})));var c=[];return this.providers.forEach((function(t){var o=t.id;c.push("name #".concat(o)),c.push("price #".concat(o)),c.push("count #".concat(o))})),{rows:i,notLinkedRows:a,shortListHeaders:["id"].concat(r),fulllListHeaders:["id"].concat(c)}},headers:function(){if(!this.tableInfo)return null;var t=null;return t=this.shortListHeaders?this.tableInfo.shortListHeaders:this.tableInfo.fulllListHeaders,t.map((function(t){return{text:t,align:"start",value:t}}))}},mounted:function(){var t=this;console.log("MOUNTED"),this.products=null,this.error=null,d.a.get("http://localhost:3000/api/getAssort").then((function(o){console.log("SUCCESS"),console.log(o.data.rows),o&&o.data&&o.data.rows&&(t.mainAssort=o.data.rows)})).catch((function(){console.log("ERROR"),t.providerProducts=null})),d.a.get("http://localhost:3000/api/getProviderProducts").then((function(o){console.log("SUCCESS"),o&&o.data&&o.data.data&&(t.providerProducts=o.data.data)})).catch((function(){console.log("ERROR"),t.providerProducts=null})),d.a.get("http://localhost:3000/api/getMainProducts").then((function(o){console.log("SUCCESS"),o&&o.data&&o.data.data&&(t.mainProducts=o.data.data)})).catch((function(){console.log("ERROR"),t.mainProducts=null})),d.a.get("http://localhost:3000/api/getProviders",{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){o&&o.data&&o.data.data&&(t.providers=o.data.data)})).catch((function(){console.log("ERROR"),t.providers=null}))},methods:{handleFileUpload:function(){this.file=this.$refs.file.files[0]},select:function(t,o){if(console.log(t),console.log(o),!this.showNotLinkedProduct)return"error";var e=o["id #".concat(this.showNotLinkedProduct)],r=this.showNotLinkedProduct,i={idProductProvider:e,idProvider:r};"New"!==t&&(i.idMainProduct=t),d.a.post("http://localhost:3000/api/addLink",i,{headers:{"Content-Type":"application/json"}}).then((function(){console.log("SUCCESS"),alert("Связан")})).catch((function(){console.log("ERROR"),alert("Ошибка")}))},writeRowsInExcel:function(){d.a.post("http://localhost:3000/api/writeRowsInExcel",{headers:this.headers,rows:[].concat(Object(a["a"])(this.tableInfo.rows),Object(a["a"])(this.tableInfo.notLinkedRows))},{headers:{"Content-Type":"application/json"}}).then((function(){console.log("SUCCESS")})).catch((function(){console.log("ERROR")}))}}},l=s,u=e("2877"),h=e("6544"),v=e.n(h),p=e("62ad"),f=e("8fea"),P=e("67b6"),m=e("43a6"),w=e("0fd9"),b=e("b974"),g=e("b73d"),R=Object(u["a"])(l,r,i,!1,null,null,null);o["default"]=R.exports;v()(R,{VCol:p["a"],VDataTable:f["a"],VRadio:P["a"],VRadioGroup:m["a"],VRow:w["a"],VSelect:b["a"],VSwitch:g["a"]})}}]);
//# sourceMappingURL=chunk-2d0bdce7.e5dc1d0b.js.map